CREATE DATABASE QuanLyCuaHangGiay;
Use QuanLyCuaHangGiay;
DROP DATABASE QuanLyCuaHangGiay;

CREATE TABLE LOAI (
	MA_LOAI NVARCHAR(10) PRIMARY KEY,
	TEN_LOAI NVARCHAR(30) NOT NULL,
);

CREATE TABLE HANG (
	MA_HANG NVARCHAR(10) PRIMARY KEY,
	TEN_HANG NVARCHAR(30) NOT NULL,
);

CREATE TABLE GIAY(
	MA_GIAY NVARCHAR(10) PRIMARY KEY,
	TEN_GIAY NVARCHAR(40) NOT NULL,
	MAU_SAC NVARCHAR (10) NOT NULL,
	SIZE INT NOT NULL,
	GIA FLOAT,
	TGIAN_BH DATE NOT NULL,
	MA_HANG NVARCHAR (10), CONSTRAINT FK_HANG_GIAY FOREIGN KEY (MA_HANG) REFERENCES HANG(MA_HANG) ON UPDATE CASCADE ON DELETE CASCADE,
	MA_LOAI NVARCHAR (10), CONSTRAINT FK_LOAI_GIAY FOREIGN KEY (MA_LOAI) REFERENCES LOAI(MA_LOAI) ON UPDATE CASCADE ON DELETE CASCADE,
	);


CREATE TABLE NHAN_VIEN(
	MA_NV NVARCHAR(10) PRIMARY KEY,
	TEN_NV NVARCHAR(30) NOT NULL,
	TAI_KHOAN NVARCHAR(30) NOT NULL,
	MAT_KHAU NVARCHAR(30) NOT NULL,
	VAI_TRO BIT,
);

CREATE TABLE KHACH_HANG(
	MA_KH NVARCHAR (10) PRIMARY KEY,
	TEN_KH NVARCHAR (20) NOT NULL,
	DIA_CHI NVARCHAR (50) NOT NULL,
	SDT NVARCHAR(10) NOT NULL,
	GIOI_TINH NVARCHAR (3) NOT NULL,
);

CREATE TABLE HOA_DON(
	MA_HD NVARCHAR (10) PRIMARY KEY,
	NGAY_LAP_HOA_DON DATE NOT NULL,
	TONG_TIEN FLOAT ,
	MA_KH NVARCHAR (10) FOREIGN KEY (MA_KH) REFERENCES KHACH_HANG(MA_KH) ON UPDATE CASCADE ON DELETE CASCADE,
	MA_NV NVARCHAR (10) FOREIGN KEY (MA_NV) REFERENCES NHAN_VIEN(MA_NV) ON UPDATE CASCADE ON DELETE CASCADE,
	);

CREATE TABLE CHI_TIET_HOA_DON(
	SO_LUONG_BAN INT NOT NULL,
	GIA_BAN FLOAT,
	THANH_TIEN FLOAT,
	NGAY_BAN DATE NOT NULL,
	MA_GIAY NVARCHAR (10) FOREIGN KEY (MA_GIAY) REFERENCES GIAY(MA_GIAY) ON UPDATE CASCADE ON DELETE CASCADE,
	MA_HD NVARCHAR (10) FOREIGN KEY (MA_HD) REFERENCES HOA_DON(MA_HD) ON UPDATE CASCADE ON DELETE CASCADE,
	PRIMARY KEY(MA_GIAY,MA_HD),
	);

INSERT INTO HANG VALUES('NIKE',N'Giày NIKE');
INSERT INTO HANG VALUES('ADIDAS',N'Giày ADIDAS');
INSERT INTO HANG VALUES('VANS',N'Giày VANS');
INSERT INTO HANG VALUES('PUMA',N'Giày PUMA');
INSERT INTO HANG VALUES('CONVERSE',N'Giày Converse');

INSERT INTO LOAI VALUES('SK',N'Giày Sneaker');
INSERT INTO LOAI VALUES('TS',N'Giày Bóng đá cổ cao');
INSERT INTO LOAI VALUES('SFF',N'Giày Slides & Flip Flops');
INSERT INTO LOAI VALUES('RS',N'Giày Chạy');
INSERT INTO LOAI VALUES('OS',N'Loại giày khác');

INSERT INTO GIAY VALUES('ASK0138', 'BAD BUNNY RESPONSE CL', N'Trắng sữa', 38, 3800000, '04/30/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0139', 'BAD BUNNY RESPONSE CL', N'Trắng sữa', 39, 3800000, '04/30/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0140', 'BAD BUNNY RESPONSE CL', N'Trắng sữa', 40, 3800000, '04/30/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0141', 'BAD BUNNY RESPONSE CL', N'Trắng sữa', 41, 3800000, '04/30/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0142', 'BAD BUNNY RESPONSE CL', N'Trắng sữa', 42, 3800000, '04/30/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0238', 'CAMPUS 00S', N'Nâu', 38, 3500000, '05/23/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0239', 'CAMPUS 00S', N'Nâu', 39, 3500000, '05/23/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0240', 'CAMPUS 00S', N'Nâu', 40, 3500000, '05/23/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0241', 'CAMPUS 00S', N'Nâu', 41, 3500000, '05/23/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0338', 'FORUM 84 LOW', N'Xanh dương', 38, 2600000, '05/25/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0339', 'FORUM 84 LOW', N'Xanh dương', 38, 2600000, '05/25/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0340', 'FORUM 84 LOW', N'Xanh dương', 38, 2600000, '05/25/2024', 'ADIDAS', 'SK');
INSERT INTO GIAY VALUES('ASK0341', 'FORUM 84 LOW', N'Xanh dương', 38, 2600000, '05/25/2024', 'ADIDAS', 'SK');
Select * from GIAY;

INSERT INTO NHAN_VIEN VALUES('QL001',N'Nguyễn Minh Ngọc','NMN9988','123456a',0);
INSERT INTO NHAN_VIEN VALUES('NV001',N'Nguyễn Ngọc','NN9823','123456a',1);
Select * from NHAN_VIEN;

INSERT INTO KHACH_HANG VALUES('KH001',N'Khách 001',N'123 Nguyễn Văn Cừ, Cần Thơ','0123456789',N'Nam');
INSERT INTO KHACH_HANG VALUES('KH002',N'Khách 002',N'234 Nguyễn Văn Cừ, Cần Thơ','0987654321',N'Nữ');
INSERT INTO KHACH_HANG VALUES('KH003',N'Khách 003',N'345 Nguyễn Văn Cừ, Cần Thơ','0123498765',N'Nam');
INSERT INTO KHACH_HANG VALUES('KH004',N'Khách 004',N'567 Nguyễn Văn Cừ, Cần Thơ','0123123123',N'Nữ');
INSERT INTO KHACH_HANG VALUES('KH005',N'Khách 005',N'789 Nguyễn Văn Cừ, Cần Thơ','0111222333',N'Nam');
Select * from KHACH_HANG;

INSERT INTO HOA_DON VALUES('HD001','06/11/2023','10000','KH001','QL001');
INSERT INTO HOA_DON VALUES('HD002','06/11/2023','100000','KH001','NV001');
INSERT INTO HOA_DON VALUES('HD003','06/11/2023','1000000','KH001','NV001');
Select * from HOA_DON;

INSERT INTO CHI_TIET_HOA_DON VALUES(1,3800000,3800000,'06/11/2023','ASK0138','HD001');
INSERT INTO CHI_TIET_HOA_DON VALUES(1,3800000,3800000,'06/11/2023','ASK0139','HD001');
Select * from CHI_TIET_HOA_DON;

